<!doctype html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tabirly | Tarot Tool v2</title>
<meta name="description" content="Tabirly tarot açılımları: Tek Kart, 3 Kart, Kelt Haçı, İlişki Açılımı. Blogger'da iframe ile gömülebilir." />
<style>
  :root{
    --bg:#0b0d12; --card:#141827; --ink:#eef2f8; --muted:#a8b0c2; --acc:#ffd166; --ok:#06d6a0; --warn:#ef476f;
    --radius:18px; --gap:14px; --shadow:0 14px 40px rgba(0,0,0,.35);
  }
  body{margin:0;background:radial-gradient(1100px 800px at 15% -10%,#1a1f33 0%,#0b0d12 55%), var(--bg);color:var(--ink);font:16px/1.6 system-ui,Inter,Roboto,Arial}
  .wrap{max-width:1000px;margin:28px auto;padding:0 16px 80px}
  header{display:flex;gap:16px;align-items:center;margin:0 0 16px}
  .logo{width:44px;height:44px;border-radius:12px;background:conic-gradient(from 0deg,#7f5af0,#00c2ff,#06d6a0,#ffd166,#7f5af0)}
  .hgroup h1{margin:0;font-size:22px}
  .panel{background:rgba(20,24,39,.65);border-radius:var(--radius);padding:14px;box-shadow:var(--shadow)}
  .controls{display:grid;grid-template-columns:1fr 1fr auto;gap:var(--gap)}
  @media(max-width:700px){.controls{grid-template-columns:1fr}}
  label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
  select,input{width:100%;border-radius:12px;border:1px solid rgba(255,255,255,.08);background:#0f1320;color:var(--ink);padding:10px;font:inherit}
  .btn{border:0;border-radius:14px;padding:12px 16px;background:linear-gradient(180deg,#ffd166,#ffca54);color:#1f1a00;font-weight:700;cursor:pointer}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:var(--gap);margin:18px 0}
  .tarot-card{position:relative;aspect-ratio:3/5;border-radius:16px;transform-style:preserve-3d;transition:transform .7s;box-shadow:var(--shadow);cursor:pointer}
  .tarot-card.flipped{transform:rotateY(180deg)}
  .tarot-card .face{position:absolute;inset:0;display:grid;place-items:center;backface-visibility:hidden;border-radius:16px;overflow:hidden}
  .tarot-card .back{background:repeating-radial-gradient(circle at 50% 38%, #222a44 0 8px, #1a2240 8px 16px)}
  .tarot-card .front{transform:rotateY(180deg);background:#141a2d;padding:12px;text-align:center}
  .pos-badge{position:absolute;top:6px;left:6px;background:rgba(0,0,0,.5);padding:4px 8px;border-radius:10px;font-size:12px}
  
  /* Spread'e göre kolon düzeni (eklendi) */
  #board[data-type="celtic"]{grid-template-columns:repeat(5,1fr)}
  @media (max-width:900px){#board[data-type="celtic"]{grid-template-columns:repeat(3,1fr)}}
  #board[data-type="relation"]{grid-template-columns:repeat(3,1fr)}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo"></div>
      <div class="hgroup">
        <h1>Tabirly Tarot v2</h1>
        <p>Tek Kart, 3 Kart, Kelt Haçı, İlişki Açılımı</p>
      </div>
    </header>

    <section class="panel">
      <div class="controls">
        <div>
          <label for="spread">Açılım türü</label>
          <select id="spread">
            <option value="one">Tek Kart</option>
            <option value="three">3 Kart (Geçmiş–Şimdi–Gelecek)</option>
            <option value="celtic">Kelt Haçı (10 kart)</option>
            <option value="relation">İlişki Açılımı (6 kart)</option>
          </select>
        </div>
        <div>
          <label for="question">Soru (isteğe bağlı)</label>
          <input id="question" type="text" placeholder="Örn. İlişkide nasıl ilerlemeliyim?">
        </div>
        <div>
          <button id="deal" class="btn">Kartları Çek</button>
        </div>
      </div>
    </section>

    <section id="board" class="grid"></section>
    <section id="explain" hidden><p id="summary"></p></section>

    <footer><p>© Tabirly — Tarot Tool v2</p></footer>
  </div>

<script>
const TAROT=["The Fool","The Magician","The High Priestess","The Empress","The Emperor","The Hierophant","The Lovers","The Chariot","Strength","The Hermit","Wheel of Fortune","Justice","The Hanged Man","Death","Temperance","The Devil","The Tower","The Star","The Moon","The Sun","Judgement","The World"];
const POSITIONS = {
  one:["Mesaj"],
  three:["Geçmiş","Şimdi","Gelecek"],
  celtic:[
    "Durum (Şimdi)",
    "Engel/Çapraz",
    "Geçmiş Temel",
    "Yakın Gelecek",
    "Bilinç/Hedef",
    "Bilinçaltı/Kök",
    "Öneri/Ben",
    "Çevre/Dış Etki",
    "Umutlar & Korkular",
    "Olası Sonuç"
  ],
  relation:[
    "Sen",
    "Partner",
    "Bağ/Dinamik",
    "Güçlü Yanlar",
    "Zorluklar",
    "Olası Sonuç"
  ]
};

const board=document.querySelector('#board');
const summary=document.querySelector('#summary');
const explain=document.querySelector('#explain');

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function renderCard(name,pos){
  const c=document.createElement('div');c.className='tarot-card';
  const back=document.createElement('div');back.className='face back';back.innerHTML='<span style="color:#ffd166">TABIRLY</span>';
  const front=document.createElement('div');front.className='face front';front.innerHTML=`<div class='pos-badge'>${pos}</div><div>${name}</div>`;
  c.appendChild(back);c.appendChild(front);
  c.addEventListener('click',()=>c.classList.toggle('flipped'));
  return c;
}

function deal(){
  board.setAttribute('aria-busy','true');
  board.innerHTML='';
  const type = spreadSel.value; // one | three | celtic | relation
  board.setAttribute('data-type', type);
  const need = (POSITIONS[type]||['Mesaj']).length;

  const deck = TAROT.cards.slice();
  shuffle(deck);

  const picks = deck.slice(0, need).map(c=>{
    const reversed = allowRev.checked ? (Math.random() < .5) : false;
    return {...c, reversed};
  });

  picks.forEach((card, i)=>{
    board.appendChild(renderCard(card, type, i));
  });

  const qtxt = qInput.value.trim();
  let txt = type === 'three' ? '3 Kart açılımı hazır.' : (type === 'celtic' ? 'Kelt Haçı (10) açılımı hazır.' : (type === 'relation' ? 'İlişki (6) açılımı hazır.' : 'Tek Kart mesajı hazır.'));
  if(qtxt) txt += ` Soru: “${qtxt}”.`;
  summary.textContent = txt + ' Kartlara tıklayarak çevir.';
  explain.hidden = false;
  board.removeAttribute('aria-busy');

  if(autoFlip.checked){
    setTimeout(()=>{
      board.querySelectorAll('.tarot-card').forEach((c,idx)=>setTimeout(()=>c.classList.add('flipped'), idx*180));
    }, 120);
  }
});
  const q=document.querySelector('#question').value.trim();
  summary.textContent=`${count} kartlık ${type} açılımı hazır.`+(q?` Soru: ${q}`:'');
  explain.hidden=false;
}

document.querySelector('#deal').addEventListener('click',deal);
</script>
</body>
</html>
